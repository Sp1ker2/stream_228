#!/bin/bash
# –°–∫—Ä–∏–ø—Ç –ø–æ–ª–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ –≤—Å–µ–π —Å–∏—Å—Ç–µ–º—ã

echo "üöÄ –ó–∞–ø—É—Å–∫ –≤—Å–µ–π —Å–∏—Å—Ç–µ–º—ã..."

cd /Users/bogdanprihodko/Bst

# –£–¥–∞–ª–µ–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä
echo "   1Ô∏è‚É£  –ó–∞–ø—É—Å–∫ —É–¥–∞–ª–µ–Ω–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞..."
./deploy_server.sh 2>&1 | tail -3
sleep 3

# Docker –∫–ª–∏–µ–Ω—Ç—ã
echo ""
echo "   2Ô∏è‚É£  –ó–∞–ø—É—Å–∫ Docker –∫–ª–∏–µ–Ω—Ç–æ–≤..."
docker-compose up -d 2>&1 | tail -3
sleep 2

# –õ–æ–∫–∞–ª—å–Ω–∞—è –º–∞—à–∏–Ω–∞
echo ""
echo "   3Ô∏è‚É£  –ó–∞–ø—É—Å–∫ –≤–∞—à–µ–π –º–∞—à–∏–Ω—ã..."
./START_MY_MACHINE.sh > /dev/null 2>&1 &
sleep 2

echo ""
echo "‚úÖ –í—Å–µ –∑–∞–ø—É—â–µ–Ω–æ!"
echo ""
echo "üìπ –û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:"
echo "   http://195.133.17.131:6789"
echo ""
echo "üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞:"
ps aux | grep "client_live.py" | grep -v grep > /dev/null && echo "   ‚úÖ –í–∞—à–∞ –º–∞—à–∏–Ω–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç" || echo "   ‚ùå –í–∞—à–∞ –º–∞—à–∏–Ω–∞ –Ω–µ –∑–∞–ø—É—â–µ–Ω–∞"
docker ps | grep screen_monitor > /dev/null && echo "   ‚úÖ Docker –∫–ª–∏–µ–Ω—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç" || echo "   ‚ùå Docker –∫–ª–∏–µ–Ω—Ç—ã –Ω–µ –∑–∞–ø—É—â–µ–Ω—ã"
curl -s http://195.133.17.131:6789 > /dev/null && echo "   ‚úÖ –£–¥–∞–ª–µ–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç" || echo "   ‚ùå –£–¥–∞–ª–µ–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω"

